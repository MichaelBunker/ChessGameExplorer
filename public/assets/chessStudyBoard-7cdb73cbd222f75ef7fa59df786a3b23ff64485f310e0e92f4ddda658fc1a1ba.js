var game=new Chess,gameHistory=new Chess,pgn=$("#ind_game_pgn").text();gameHistory.load_pgn(pgn);var moves=gameHistory.history(),cfg={draggable:!0,position:"start",onDragStart:onDragStart,onDrop:onDrop,onMouseoutSquare:onMouseoutSquare,onMouseoverSquare:onMouseoverSquare,onSnapEnd:onSnapEnd},board=ChessBoard("show_game_board",cfg);$("#startBtn").on("click",function(){board.start()}),$("#clearBtn").on("click",function(){board.start(),board.clear(),game.reset(),statusEl.html(""),fenEl.html(""),pgnEl.html("")}),$("#undoBtn").on("click",function(){game.undo();var o=game.fen();board.position(o)}),$("#moveBtn").on("click",function(){game.move(moves[0]),fen=game.fen(),board.position(fen),moves.splice(0,1)});